import{r as e,a as t,R as r,b as n}from"./vendor-CyvzqkFf.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var a={exports:{}},i={},o=e,l=Symbol.for("react.element"),s=Symbol.for("react.fragment"),c=Object.prototype.hasOwnProperty,d=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function h(e,t,r){var n,a={},i=null,o=null;for(n in void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(o=t.ref),t)c.call(t,n)&&!u.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===a[n]&&(a[n]=t[n]);return{$$typeof:l,type:e,key:i,ref:o,props:a,_owner:d.current}}i.Fragment=s,i.jsx=h,i.jsxs=h,a.exports=i;var p,m,f=a.exports,x={},g=t;
/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},y.apply(this,arguments)}x.createRoot=g.createRoot,x.hydrateRoot=g.hydrateRoot,(m=p||(p={})).Pop="POP",m.Push="PUSH",m.Replace="REPLACE";const b="popstate";function v(e){return void 0===e&&(e={}),function(e,t,r,n){void 0===n&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l=p.Pop,s=null,c=d();null==c&&(c=0,o.replaceState(y({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function u(){l=p.Pop;let e=d(),t=null==e?null:e-c;c=e,s&&s({action:l,location:x.location,delta:t})}function h(e,t){l=p.Push;let r=k(x.location,e,t);c=d()+1;let n=w(r,c),u=x.createHref(r);try{o.pushState(n,"",u)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;a.location.assign(u)}i&&s&&s({action:l,location:x.location,delta:1})}function m(e,t){l=p.Replace;let r=k(x.location,e,t);c=d();let n=w(r,c),a=x.createHref(r);o.replaceState(n,"",a),i&&s&&s({action:l,location:x.location,delta:0})}function f(e){let t="null"!==a.location.origin?a.location.origin:a.location.href,r="string"==typeof e?e:C(e);return r=r.replace(/ $/,"%20"),j(t,"No window.location.(origin|href) available to create URL for href: "+r),new URL(r,t)}let x={get action(){return l},get location(){return e(a,o)},listen(e){if(s)throw new Error("A history only accepts one active listener");return a.addEventListener(b,u),s=e,()=>{a.removeEventListener(b,u),s=null}},createHref:e=>t(a,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:h,replace:m,go:e=>o.go(e)};return x}(function(e,t){let{pathname:r,search:n,hash:a}=e.location;return k("",{pathname:r,search:n,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"==typeof t?t:C(t)},0,e)}function j(e,t){if(!1===e||null==e)throw new Error(t)}function S(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(r){}}}function w(e,t){return{usr:e.state,key:e.key,idx:t}}function k(e,t,r,n){return void 0===r&&(r=null),y({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?_(t):t,{state:r,key:t&&t.key||n||Math.random().toString(36).substr(2,8)})}function C(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(t+="#"===n.charAt(0)?n:"#"+n),t}function _(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}var R,B;function z(e,t,r){return void 0===r&&(r="/"),function(e,t,r){let n="string"==typeof t?_(t):t,a=U(n.pathname||"/",r);if(null==a)return null;let i=N(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r]);return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let o=null;for(let l=0;null==o&&l<i.length;++l){let e=$(a);o=F(i[l],e)}return o}(e,t,r)}function N(e,t,r,n){void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===n&&(n="");let a=(e,a,i)=>{let o={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};o.relativePath.startsWith("/")&&(j(o.relativePath.startsWith(n),'Absolute route path "'+o.relativePath+'" nested under path "'+n+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(n.length));let l=Y([n,o.relativePath]),s=r.concat(o);e.children&&e.children.length>0&&(j(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),N(e.children,t,s,l)),(null!=e.path||e.index)&&t.push({path:l,score:A(l,e.index),routesMeta:s})};return e.forEach((e,t)=>{var r;if(""!==e.path&&null!=(r=e.path)&&r.includes("?"))for(let n of T(e.path))a(e,t,n);else a(e,t)}),t}function T(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(0===n.length)return a?[i,""]:[i];let o=T(n.join("/")),l=[];return l.push(...o.map(e=>""===e?i:[i,e].join("/"))),a&&l.push(...o),l.map(t=>e.startsWith("/")&&""===t?"/":t)}(B=R||(R={})).data="data",B.deferred="deferred",B.redirect="redirect",B.error="error";const P=/^:[\w-]+$/,E=3,W=2,O=1,I=10,L=-2,M=e=>"*"===e;function A(e,t){let r=e.split("/"),n=r.length;return r.some(M)&&(n+=L),t&&(n+=W),r.filter(e=>!M(e)).reduce((e,t)=>e+(P.test(t)?E:""===t?O:I),n)}function F(e,t,r){let{routesMeta:n}=e,a={},i="/",o=[];for(let l=0;l<n.length;++l){let e=n[l],r=l===n.length-1,s="/"===i?t:t.slice(i.length)||"/",c=D({path:e.relativePath,caseSensitive:e.caseSensitive,end:r},s),d=e.route;if(!c)return null;Object.assign(a,c.params),o.push({params:a,pathname:Y([i,c.pathname]),pathnameBase:G(Y([i,c.pathnameBase])),route:d}),"/"!==c.pathnameBase&&(i=Y([i,c.pathnameBase]))}return o}function D(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=function(e,t,r){void 0===t&&(t=!1);void 0===r&&(r=!0);S("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(n.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(n.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");let i=new RegExp(a,t?void 0:"i");return[i,n]}(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((e,t,r)=>{let{paramName:n,isOptional:a}=t;if("*"===n){let e=l[r]||"";o=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const s=l[r];return e[n]=a&&!s?void 0:(s||"").replace(/%2F/g,"/"),e},{}),pathname:i,pathnameBase:o,pattern:e}}function $(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return S(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function U(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}const q=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function V(e,t){void 0===t&&(t="/");let r,{pathname:n,search:a="",hash:i=""}="string"==typeof e?_(e):e;if(n)if(o=n,q.test(o))r=n;else{if(n.includes("//")){let e=n;n=n.replace(/\/\/+/g,"/"),S(!1,"Pathnames cannot have embedded double slashes - normalizing "+e+" -> "+n)}r=n.startsWith("/")?H(n.substring(1),"/"):H(n,t)}else r=t;var o;return{pathname:r,search:Q(a),hash:K(i)}}function H(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}function J(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the `to."+r+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}const Y=e=>e.join("/").replace(/\/\/+/g,"/"),G=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Q=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",K=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";const X=["post","put","patch","delete"];new Set(X);const Z=["get",...X];
/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
function ee(){return ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ee.apply(this,arguments)}new Set(Z);const te=e.createContext(null),re=e.createContext(null),ne=e.createContext(null),ae=e.createContext(null),ie=e.createContext({outlet:null,matches:[],isDataRoute:!1}),oe=e.createContext(null);function le(){return null!=e.useContext(ae)}function se(){return le()||j(!1),e.useContext(ae).location}function ce(t){e.useContext(ne).static||e.useLayoutEffect(t)}function de(){let{isDataRoute:t}=e.useContext(ie);return t?function(){let{router:t}=function(){let t=e.useContext(te);return t||j(!1),t}(xe.UseNavigateStable),r=ye(ge.UseNavigateStable),n=e.useRef(!1);return ce(()=>{n.current=!0}),e.useCallback(function(e,a){void 0===a&&(a={}),n.current&&("number"==typeof e?t.navigate(e):t.navigate(e,ee({fromRouteId:r},a)))},[t,r])}():function(){le()||j(!1);let t=e.useContext(te),{basename:r,future:n,navigator:a}=e.useContext(ne),{matches:i}=e.useContext(ie),{pathname:o}=se(),l=JSON.stringify(function(e,t){let r=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t?r.map((e,t)=>t===r.length-1?e.pathname:e.pathnameBase):r.map(e=>e.pathnameBase)}(i,n.v7_relativeSplatPath)),s=e.useRef(!1);return ce(()=>{s.current=!0}),e.useCallback(function(e,n){if(void 0===n&&(n={}),!s.current)return;if("number"==typeof e)return void a.go(e);let i=function(e,t,r,n){let a;void 0===n&&(n=!1),"string"==typeof e?a=_(e):(a=y({},e),j(!a.pathname||!a.pathname.includes("?"),J("?","pathname","search",a)),j(!a.pathname||!a.pathname.includes("#"),J("#","pathname","hash",a)),j(!a.search||!a.search.includes("#"),J("#","search","hash",a)));let i,o=""===e||""===a.pathname,l=o?"/":a.pathname;if(null==l)i=r;else{let e=t.length-1;if(!n&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}i=e>=0?t[e]:"/"}let s=V(a,i),c=l&&"/"!==l&&l.endsWith("/"),d=(o||"."===l)&&r.endsWith("/");return s.pathname.endsWith("/")||!c&&!d||(s.pathname+="/"),s}(e,JSON.parse(l),o,"path"===n.relative);null==t&&"/"!==r&&(i.pathname="/"===i.pathname?r:Y([r,i.pathname])),(n.replace?a.replace:a.push)(i,n.state,n)},[r,a,l,o,t])}()}function ue(t,r){return function(t,r,n,a){le()||j(!1);let{navigator:i}=e.useContext(ne),{matches:o}=e.useContext(ie),l=o[o.length-1],s=l?l.params:{};!l||l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let d,u=se();if(r){var h;let e="string"==typeof r?_(r):r;"/"===c||(null==(h=e.pathname)?void 0:h.startsWith(c))||j(!1),d=e}else d=u;let m=d.pathname||"/",f=m;if("/"!==c){let e=c.replace(/^\//,"").split("/");f="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let x=z(t,{pathname:f}),g=function(t,r,n,a){var i;void 0===r&&(r=[]);void 0===n&&(n=null);void 0===a&&(a=null);if(null==t){var o;if(!n)return null;if(n.errors)t=n.matches;else{if(!(null!=(o=a)&&o.v7_partialHydration&&0===r.length&&!n.initialized&&n.matches.length>0))return null;t=n.matches}}let l=t,s=null==(i=n)?void 0:i.errors;if(null!=s){let e=l.findIndex(e=>e.route.id&&void 0!==(null==s?void 0:s[e.route.id]));e>=0||j(!1),l=l.slice(0,Math.min(l.length,e+1))}let c=!1,d=-1;if(n&&a&&a.v7_partialHydration)for(let e=0;e<l.length;e++){let t=l[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(d=e),t.route.id){let{loaderData:e,errors:r}=n,a=t.route.loader&&void 0===e[t.route.id]&&(!r||void 0===r[t.route.id]);if(t.route.lazy||a){c=!0,l=d>=0?l.slice(0,d+1):[l[0]];break}}}return l.reduceRight((t,a,i)=>{let o,u=!1,h=null,p=null;var m;n&&(o=s&&a.route.id?s[a.route.id]:void 0,h=a.route.errorElement||pe,c&&(d<0&&0===i?(be[m="route-fallback"]||(be[m]=!0),u=!0,p=null):d===i&&(u=!0,p=a.route.hydrateFallbackElement||null)));let f=r.concat(l.slice(0,i+1)),x=()=>{let r;return r=o?h:u?p:a.route.Component?e.createElement(a.route.Component,null):a.route.element?a.route.element:t,e.createElement(fe,{match:a,routeContext:{outlet:t,matches:f,isDataRoute:null!=n},children:r})};return n&&(a.route.ErrorBoundary||a.route.errorElement||0===i)?e.createElement(me,{location:n.location,revalidation:n.revalidation,component:h,error:o,children:x(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):x()},null)}(x&&x.map(e=>Object.assign({},e,{params:Object.assign({},s,e.params),pathname:Y([c,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:Y([c,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,n,a);if(r&&g)return e.createElement(ae.Provider,{value:{location:ee({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:p.Pop}},g);return g}(t,r)}function he(){let t=function(){var t;let r=e.useContext(oe),n=function(){let t=e.useContext(re);return t||j(!1),t}(),a=ye();if(void 0!==r)return r;return null==(t=n.errors)?void 0:t[a]}(),r=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},r),n?e.createElement("pre",{style:a},n):null,null)}const pe=e.createElement(he,null);class me extends e.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?e.createElement(ie.Provider,{value:this.props.routeContext},e.createElement(oe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function fe(t){let{routeContext:r,match:n,children:a}=t,i=e.useContext(te);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),e.createElement(ie.Provider,{value:r},a)}var xe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(xe||{}),ge=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ge||{});function ye(t){let r=function(){let t=e.useContext(ie);return t||j(!1),t}(),n=r.matches[r.matches.length-1];return n.route.id||j(!1),n.route.id}const be={};function ve(e){j(!1)}function je(t){let{basename:r="/",children:n=null,location:a,navigationType:i=p.Pop,navigator:o,static:l=!1,future:s}=t;le()&&j(!1);let c=r.replace(/^\/*/,"/"),d=e.useMemo(()=>({basename:c,navigator:o,static:l,future:ee({v7_relativeSplatPath:!1},s)}),[c,s,o,l]);"string"==typeof a&&(a=_(a));let{pathname:u="/",search:h="",hash:m="",state:f=null,key:x="default"}=a,g=e.useMemo(()=>{let e=U(u,c);return null==e?null:{location:{pathname:e,search:h,hash:m,state:f,key:x},navigationType:i}},[c,u,h,m,f,x,i]);return null==g?null:e.createElement(ne.Provider,{value:d},e.createElement(ae.Provider,{children:n,value:g}))}function Se(e){let{children:t,location:r}=e;return ue(we(t),r)}function we(t,r){void 0===r&&(r=[]);let n=[];return e.Children.forEach(t,(t,a)=>{if(!e.isValidElement(t))return;let i=[...r,a];if(t.type===e.Fragment)return void n.push.apply(n,we(t.props.children,i));t.type!==ve&&j(!1),t.props.index&&t.props.children&&j(!1);let o={id:t.props.id||i.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(o.children=we(t.props.children,i)),n.push(o)}),n}
/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ke(e){return void 0===e&&(e=""),new URLSearchParams("string"==typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(e=>[r,e]):[[r,n]])},[]))}new Promise(()=>{});try{window.__reactRouterVersion="6"}catch(ot){}const Ce=r.startTransition;function _e(t){let{basename:r,children:n,future:a,window:i}=t,o=e.useRef();null==o.current&&(o.current=v({window:i,v5Compat:!0}));let l=o.current,[s,c]=e.useState({action:l.action,location:l.location}),{v7_startTransition:d}=a||{},u=e.useCallback(e=>{d&&Ce?Ce(()=>c(e)):c(e)},[c,d]);return e.useLayoutEffect(()=>l.listen(u),[l,u]),e.useEffect(()=>{return null==(e=a)||e.v7_startTransition,void(null==e||e.v7_relativeSplatPath);var e},[a]),e.createElement(je,{basename:r,children:n,location:s.location,navigationType:s.action,navigator:l,future:a})}var Re,Be,ze,Ne;function Te(t){let r=e.useRef(ke(t)),n=e.useRef(!1),a=se(),i=e.useMemo(()=>function(e,t){let r=ke(e);return t&&t.forEach((e,n)=>{r.has(n)||t.getAll(n).forEach(e=>{r.append(n,e)})}),r}(a.search,n.current?null:r.current),[a.search]),o=de(),l=e.useCallback((e,t)=>{const r=ke("function"==typeof e?e(i):e);n.current=!0,o("?"+r,t)},[o,i]);return[i,l]}(Be=Re||(Re={})).UseScrollRestoration="useScrollRestoration",Be.UseSubmit="useSubmit",Be.UseSubmitFetcher="useSubmitFetcher",Be.UseFetcher="useFetcher",Be.useViewTransitionState="useViewTransitionState",(Ne=ze||(ze={})).UseFetcher="useFetcher",Ne.UseFetchers="useFetchers",Ne.UseScrollRestoration="useScrollRestoration";const Pe="/api",Ee=Pe.replace(/\/api\/?$/,"")||"";async function We(e,t={}){var r;const n=await fetch(`${Pe}${e}`,{headers:{"Content-Type":"application/json",Accept:"application/json",...t.headers},...t});if(!n.ok){const e=await n.text().catch(()=>"");let t="Request failed";try{const n=JSON.parse(e);t=n.message??(null==(r=Object.values(n.errors??{})[0])?void 0:r[0])??"Request failed"}catch{t=`Server error (${n.status})`}throw new Error(t)}return await n.json()}async function Oe(e){return We("/auth/customer/otp/request",{method:"POST",body:JSON.stringify({phone:e})})}async function Ie(e){return We("/auth/customer/otp/verify",{method:"POST",body:JSON.stringify(e)})}async function Le(){return We("/categories")}async function Me(){return We("/items?available_only=1")}async function Ae(e){return We("/customer/me",{headers:{Authorization:`Bearer ${e}`}})}async function Fe(e,t,r){return We(`/orders/${t}/apply-promo`,{method:"POST",headers:{Authorization:`Bearer ${e}`},body:JSON.stringify({code:r})})}function De({item:t,onSelectItem:r,onAddToCartWithQuantity:n}){const[a,i]=e.useState(1);return f.jsxs("div",{style:{background:"white",border:"1px solid #e9ecef",borderRadius:"16px",overflow:"hidden",transition:"all 0.3s",boxShadow:"0 2px 8px rgba(0,0,0,0.04)",display:"flex",flexDirection:"column"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-6px)",e.currentTarget.style.boxShadow="0 12px 28px rgba(0,0,0,0.12)",e.currentTarget.style.borderColor="#1ba3b9"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.04)",e.currentTarget.style.borderColor="#e9ecef"},children:[f.jsx("div",{role:"button",tabIndex:0,onClick:()=>r(t),onKeyDown:e=>"Enter"===e.key&&r(t),style:{width:"100%",height:"180px",background:t.image_url?void 0:`linear-gradient(${45+30*t.id}deg, rgba(102, 126, 234, 0.4), rgba(118, 75, 162, 0.4))`,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"4rem",cursor:"pointer",overflow:"hidden"},children:t.image_url?f.jsx("img",{src:t.image_url.startsWith("http")?t.image_url:`${Ee}${t.image_url.startsWith("/")?"":"/"}${t.image_url}`,alt:t.name,style:{width:"100%",height:"100%",objectFit:"cover"},loading:"lazy"}):"ðŸ½ï¸"}),f.jsxs("div",{style:{padding:"1.5rem",flex:1,display:"flex",flexDirection:"column",gap:"1rem"},children:[f.jsx("h3",{style:{fontSize:"1.3rem",fontWeight:600,marginBottom:"0.25rem",color:"#2d3436"},children:t.name}),f.jsxs("div",{style:{fontSize:"1.6rem",fontWeight:700,color:"#1ba3b9",marginBottom:"0.5rem"},children:["MVR ","number"==typeof t.base_price?t.base_price.toFixed(2):t.base_price]}),f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flexWrap:"wrap",marginTop:"auto"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",border:"1px solid #e9ecef",borderRadius:"10px",overflow:"hidden"},children:[f.jsx("button",{type:"button",onClick:e=>{e.stopPropagation(),i(e=>Math.max(1,e-1))},style:{width:"36px",height:"36px",background:"#f1f3f5",border:"none",cursor:"pointer",fontSize:"1.2rem",fontWeight:600},"aria-label":"Decrease quantity",children:"âˆ’"}),f.jsx("span",{style:{minWidth:"2.5rem",textAlign:"center",fontWeight:600,color:"#2d3436"},children:a}),f.jsx("button",{type:"button",onClick:e=>{e.stopPropagation(),i(e=>e+1)},style:{width:"36px",height:"36px",background:"#f1f3f5",border:"none",cursor:"pointer",fontSize:"1.2rem",fontWeight:600},"aria-label":"Increase quantity",children:"+"})]}),f.jsxs("button",{type:"button",className:"btn-primary",style:{flex:1,minWidth:"120px",padding:"0.6rem 1rem",fontSize:"0.95rem",borderRadius:"10px"},onClick:e=>{e.stopPropagation(),n(t,a)},children:["Add to cart (",a,")"]})]}),f.jsx("button",{type:"button",className:"btn-primary",style:{width:"100%",padding:"0.5rem",fontSize:"0.9rem",borderRadius:"10px",background:"transparent",color:"#1ba3b9",border:"1px solid #1ba3b9"},onClick:e=>{e.stopPropagation(),r(t)},children:"Customize (modifiers)"})]})]})}function $e(){const t=de(),[r,n]=e.useState([]),[a,i]=e.useState([]),[o,l]=e.useState(null),[s,c]=e.useState(""),[d,u]=e.useState("name"),[h,p]=e.useState(null),[m,x]=e.useState([]),[g,y]=e.useState(()=>{try{const e=localStorage.getItem("bakegrill_cart");if(e){return JSON.parse(e).map(e=>({item:{id:e.id,name:e.name??"Item",base_price:e.price??0,category_id:1},quantity:e.quantity??1,modifiers:[]}))}}catch(ot){console.error("Failed to import cart:",ot)}return[]}),[b,v]=e.useState(()=>localStorage.getItem("online_token")),[j,S]=e.useState(null),[w,k]=e.useState([]),[C,_]=e.useState(""),[R,B]=e.useState(""),[z,N]=e.useState(!1),[T,P]=e.useState(null),[E,W]=e.useState(""),[O,I]=e.useState(""),[L,M]=e.useState(!1),[A,F]=e.useState(null),[D,$]=e.useState(null);e.useEffect(()=>{const e=g.map(e=>({id:e.item.id,name:e.item.name,price:e.item.base_price,quantity:e.quantity,modifiers:e.modifiers.map(e=>({id:e.id,name:e.name,price:e.price}))}));localStorage.setItem("bakegrill_cart",JSON.stringify(e))},[g]),e.useEffect(()=>{(async function(){return We("/opening-hours/status")})().then(({open:e,message:t})=>{F(e),$(e?null:t??"We are currently closed.")}).catch(()=>F(!0))},[]),e.useEffect(()=>{Promise.all([Le(),Me()]).then(([e,t])=>{var r;console.log("Menu loaded:",e.data.length,"categories",t.data.length,"items"),n(e.data),i(t.data),l((null==(r=e.data[0])?void 0:r.id)??null);try{const e=localStorage.getItem("bakegrill_cart");if(e&&0===g.length){const r=JSON.parse(e).map(e=>{const r=t.data.find(t=>t.id===e.id);return r?{item:r,quantity:e.quantity||1,modifiers:[]}:null}).filter(Boolean);r.length>0&&(y(r),console.log("Imported",r.length,"items from main website cart"),localStorage.removeItem("bakegrill_cart"))}}catch(ot){console.error("Failed to import cart:",ot)}}).catch(e=>{console.error("Failed to load menu:",e),I("Unable to load the menu: "+e.message)})},[]),e.useEffect(()=>{if(!b)return S(null),void k([]);Ae(b).then(e=>{S(e.customer.name||e.customer.phone)}).catch(()=>S(null)),async function(e){return We("/customer/orders",{headers:{Authorization:`Bearer ${e}`}})}(b).then(e=>k(e.data)).catch(()=>k([]))},[b]);const U=e.useMemo(()=>{let e=a;return o&&(e=e.filter(e=>e.category_id===o)),s&&(e=e.filter(e=>e.name.toLowerCase().includes(s.toLowerCase()))),e="price-low"===d?[...e].sort((e,t)=>parseFloat(String(e.base_price))-parseFloat(String(t.base_price))):"price-high"===d?[...e].sort((e,t)=>parseFloat(String(t.base_price))-parseFloat(String(e.base_price))):[...e].sort((e,t)=>e.name.localeCompare(t.name)),e},[a,o,s,d]),q=e.useMemo(()=>g.reduce((e,t)=>{const r=t.modifiers.reduce((e,t)=>e+parseFloat(String(t.price)),0);return e+(parseFloat(String(t.item.base_price))+r)*t.quantity},0),[g]),V=async()=>{M(!0),W(""),P(null);try{const e=await Oe(C);N(!0),I("OTP sent. Please check your SMS."),e.otp&&P(`Dev OTP: ${e.otp}`)}catch(e){W(e.message)}finally{M(!1)}},H=async()=>{M(!0),W("");try{const e=await Ie({phone:C,otp:R});v(e.token),localStorage.setItem("online_token",e.token),N(!1),B(""),I("Logged in successfully.")}catch(e){W(e.message)}finally{M(!1)}},J=e=>{p(e),x([])},Y=(e,t)=>{y(r=>{const n=[...r];return t<=0?(n.splice(e,1),n):(n[e]={...n[e],quantity:t},n)})},G=(e,t)=>{t<1||y(r=>{const n=r.findIndex(t=>t.item.id===e.id&&0===t.modifiers.length);if(n>=0){const e=[...r];return e[n]={...e[n],quantity:e[n].quantity+t},e}return[...r,{item:e,quantity:t,modifiers:[]}]})};return b?f.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",background:"#fff"},children:[f.jsx("header",{style:{position:"sticky",top:0,background:"#ffffff",borderBottom:"1px solid #e9ecef",zIndex:100,boxShadow:"0 2px 8px rgba(0,0,0,0.04)",display:"block",width:"100%"},children:f.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",padding:"1rem 2rem",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[f.jsxs("a",{href:"/",style:{display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"1.4rem",fontWeight:600,color:"#1c1e21",textDecoration:"none"},children:[f.jsx("img",{src:"/logo.svg",alt:"Bake & Grill",style:{width:"48px",height:"48px",borderRadius:"12px",display:"block"}}),f.jsx("span",{children:"Bake & Grill"})]}),f.jsxs("nav",{style:{display:"flex",gap:"1rem",alignItems:"center"},children:[j&&f.jsxs("span",{style:{fontSize:"0.9rem",color:"#636e72"},children:["Hi, ",j]}),f.jsx("button",{onClick:()=>{v(null),localStorage.removeItem("online_token")},style:{background:"transparent",color:"#1ba3b9",border:"1px solid #1ba3b9",padding:"0.5rem 1.25rem",borderRadius:"999px",fontSize:"0.9rem",fontWeight:500,cursor:"pointer"},children:"Logout"})]})]})}),f.jsxs("main",{className:"flex-1 grid gap-6 px-6 py-6 lg:grid-cols-12 max-w-7xl mx-auto w-full",style:{background:"#fafbfc",minHeight:"60vh"},children:[f.jsxs("section",{className:"lg:col-span-3 space-y-3",children:[f.jsx("h2",{className:"text-sm font-semibold text-slate-500",children:"Categories"}),f.jsx("div",{className:"space-y-2",children:r.map(e=>f.jsx("button",{onClick:()=>l(e.id),className:"w-full rounded-lg px-4 py-3 text-left font-medium transition-all",style:{background:o===e.id?"var(--teal)":"white",color:o===e.id?"white":"var(--text)",border:"1px solid "+(o===e.id?"var(--teal)":"var(--border)")},children:e.name},e.id))})]}),f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",style:{marginBottom:"2rem"},children:U.map(e=>f.jsx(De,{item:e,onSelectItem:J,onAddToCartWithQuantity:G},e.id))}),f.jsxs("div",{style:{position:window.innerWidth<768?"fixed":"sticky",bottom:window.innerWidth<768?0:"auto",top:window.innerWidth<768?"auto":"90px",left:0,right:0,background:"white",border:"1px solid #e9ecef",borderRadius:window.innerWidth<768?"20px 20px 0 0":"16px",padding:"1.5rem",boxShadow:window.innerWidth<768?"0 -4px 20px rgba(0,0,0,0.1)":"0 2px 8px rgba(0,0,0,0.04)",zIndex:100,maxWidth:window.innerWidth<768?"100%":"400px",marginLeft:window.innerWidth<768?0:"auto"},children:[f.jsxs("div",{className:"cart-card",children:[f.jsx("h2",{className:"text-lg font-bold mb-4",style:{color:"var(--dark)"},children:"Your Cart"}),0===g.length?f.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Your cart is empty."}):f.jsxs("div",{className:"mt-3 space-y-3",children:[g.map((e,t)=>f.jsxs("div",{className:"rounded-lg border border-slate-100 p-3",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("p",{className:"text-sm font-semibold text-slate-900",children:e.item.name}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:()=>Y(t,e.quantity-1),className:"h-6 w-6 rounded-full border border-slate-200 text-xs",children:"-"}),f.jsx("span",{className:"text-xs",children:e.quantity}),f.jsx("button",{onClick:()=>Y(t,e.quantity+1),className:"h-6 w-6 rounded-full border border-slate-200 text-xs",children:"+"})]})]}),e.modifiers.length>0&&f.jsxs("p",{className:"mt-2 text-xs text-slate-500",children:["+ ",e.modifiers.map(e=>e.name).join(", ")]})]},`${e.item.id}-${t}`)),f.jsxs("div",{className:"flex items-center justify-between text-sm font-semibold",children:[f.jsx("span",{children:"Total"}),f.jsxs("span",{children:["MVR ","number"==typeof q?q.toFixed(2):q]})]})]}),!1===A&&D&&f.jsxs("div",{className:"mb-3 p-3 rounded-lg bg-amber-50 border border-amber-200 text-amber-800 text-sm",children:["ðŸ• ",D]}),f.jsx("button",{onClick:()=>{0!==g.length&&t("/checkout")},disabled:0===g.length||!1===A,className:"btn-primary w-full mt-4 text-lg",children:!1===A?"We're closed":"Proceed to Checkout â†’"})]}),f.jsxs("div",{className:"cart-card",children:[f.jsx("h2",{className:"text-lg font-bold mb-4",style:{color:"var(--dark)"},children:"Order History"}),0===w.length?f.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"No orders yet."}):f.jsx("div",{className:"mt-3 space-y-2",children:w.map(e=>f.jsxs("div",{className:"rounded-lg border border-slate-100 p-3 text-sm",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"font-semibold",children:e.order_number}),f.jsx("span",{className:"text-xs text-slate-500",children:e.status})]}),f.jsxs("p",{className:"text-xs text-slate-500",children:["MVR ",e.total?"number"==typeof e.total?e.total.toFixed(2):e.total:"0.00"]})]},e.id))})]})]})]}),f.jsxs("footer",{className:"footer",children:[f.jsxs("div",{className:"footer-content",children:[f.jsxs("div",{children:[f.jsx("h3",{children:"Bake & Grill CafÃ©"}),f.jsx("p",{children:"Authentic Dhivehi cuisine, fresh pastries, and premium grills in MalÃ©."})]}),f.jsxs("div",{children:[f.jsx("h3",{children:"Location"}),f.jsx("p",{children:"Majeedhee Magu, MalÃ©, Maldives"}),f.jsx("p",{children:"Near ferry terminal"})]}),f.jsxs("div",{children:[f.jsx("h3",{children:"Quick Links"}),f.jsx("a",{href:"/menu",children:"Menu"}),f.jsx("a",{href:"/hours",children:"Opening Hours"}),f.jsx("a",{href:"/contact",children:"Contact Us"}),f.jsx("a",{href:"/privacy",children:"Privacy Policy"})]}),f.jsxs("div",{children:[f.jsx("h3",{children:"Contact"}),f.jsx("p",{children:"+960 9120011"}),f.jsx("p",{children:"hello@bakeandgrill.mv"}),f.jsx("a",{href:"https://wa.me/9609120011",target:"_blank",children:"WhatsApp"})]})]}),f.jsxs("div",{className:"footer-copyright",children:["Â© ",(new Date).getFullYear()," Bake & Grill. All rights reserved."]})]}),h&&f.jsx("div",{className:"fixed inset-0 z-20 flex items-center justify-center bg-black/40 px-4",children:f.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-white p-6",children:[f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold",children:h.name}),f.jsxs("p",{className:"text-sm text-slate-500",children:["MVR ","number"==typeof h.base_price?h.base_price.toFixed(2):h.base_price]})]}),f.jsx("button",{onClick:()=>p(null),className:"text-sm text-slate-400",children:"Close"})]}),h.modifiers&&h.modifiers.length>0?f.jsxs("div",{className:"mt-4 space-y-2",children:[f.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"Modifiers"}),h.modifiers.map(e=>f.jsxs("label",{className:"flex items-center justify-between rounded-lg border border-slate-100 px-3 py-2 text-sm",children:[f.jsxs("span",{children:[e.name," (+MVR ","number"==typeof e.price?e.price.toFixed(2):e.price,")"]}),f.jsx("input",{type:"checkbox",checked:m.some(t=>t.id===e.id),onChange:()=>(e=>{x(t=>t.some(t=>t.id===e.id)?t.filter(t=>t.id!==e.id):[...t,e])})(e),className:"h-4 w-4"})]},e.id))]}):f.jsx("p",{className:"mt-4 text-sm text-slate-500",children:"No modifiers for this item."}),f.jsx("button",{onClick:()=>{h&&(y(e=>{const t=e.findIndex(e=>e.item.id===h.id&&e.modifiers.map(e=>e.id).join(",")===m.map(e=>e.id).join(","));if(t>=0){const r=[...e];return r[t]={...r[t],quantity:r[t].quantity+1},r}return[...e,{item:h,quantity:1,modifiers:m}]}),p(null),x([]))},className:"mt-5 w-full rounded-full px-6 py-3 text-base font-semibold text-white transition-all hover:shadow-lg",style:{background:"var(--teal)"},children:"Add to Cart"})]})})]}):f.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",background:"#fff"},children:[f.jsx("header",{style:{position:"sticky",top:0,background:"#ffffff",borderBottom:"1px solid #e9ecef",zIndex:100,boxShadow:"0 2px 8px rgba(0,0,0,0.04)",display:"block",width:"100%"},children:f.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",padding:"1rem 2rem",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[f.jsxs("a",{href:"/",style:{display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"1.4rem",fontWeight:600,color:"#1c1e21",textDecoration:"none"},children:[f.jsx("img",{src:"/logo.svg",alt:"Bake & Grill",style:{width:"48px",height:"48px",borderRadius:"12px",display:"block"}}),f.jsx("span",{children:"Bake & Grill"})]}),f.jsxs("nav",{style:{display:"flex",gap:"2rem",alignItems:"center"},children:[f.jsx("a",{href:"/",style:{fontWeight:500,textDecoration:"none",color:"inherit"},children:"Home"}),f.jsx("a",{href:"/menu",style:{fontWeight:500,textDecoration:"none",color:"inherit"},children:"Menu"})]})]})}),f.jsx("div",{className:"flex-1 flex items-center justify-center px-4 py-12",style:{background:"linear-gradient(135deg, rgba(27, 163, 185, 0.1) 0%, rgba(184, 168, 144, 0.1) 100%)",backgroundSize:"400% 400%"},children:f.jsxs("div",{style:{maxWidth:"500px",width:"100%"},children:[f.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[f.jsx("div",{style:{fontSize:"3.5rem",marginBottom:"1rem"},children:"ðŸ½ï¸"}),f.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:"700",color:"var(--dark)",marginBottom:"0.75rem"},children:"Order Fresh Food"}),f.jsx("p",{style:{fontSize:"1.1rem",color:"#636e72"},children:"Quick, easy, and delicious - delivered to you"})]}),f.jsxs("div",{style:{background:"white",borderRadius:"24px",padding:"2.5rem",boxShadow:"0 20px 60px rgba(0,0,0,0.12)",border:"1px solid rgba(27, 163, 185, 0.2)"},children:[f.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[f.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",color:"var(--dark)",marginBottom:"0.5rem"},children:"Sign In"}),f.jsx("p",{style:{color:"#636e72",fontSize:"0.95rem"},children:"We'll send you a verification code via SMS"})]}),f.jsxs("div",{style:{marginTop:"1.5rem"},children:[f.jsx("label",{style:{display:"block",fontWeight:"500",marginBottom:"0.75rem",color:"var(--dark)",fontSize:"0.95rem"},children:"ðŸ“± Phone Number"}),f.jsx("input",{value:C,onChange:e=>_(e.target.value),style:{width:"100%",padding:"1rem 1.25rem",border:"2px solid var(--border)",borderRadius:"12px",fontSize:"1rem",transition:"all 0.2s"},placeholder:"7820288 or +9607820288",onFocus:e=>e.target.style.borderColor="var(--teal)",onBlur:e=>e.target.style.borderColor="var(--border)"}),z&&f.jsxs("div",{style:{marginTop:"1.5rem"},children:[f.jsx("label",{style:{display:"block",fontWeight:"500",marginBottom:"0.75rem",color:"var(--dark)",fontSize:"0.95rem"},children:"ðŸ” Verification Code"}),f.jsx("input",{value:R,onChange:e=>B(e.target.value),style:{width:"100%",padding:"1rem 1.25rem",border:"2px solid var(--border)",borderRadius:"12px",fontSize:"1.5rem",letterSpacing:"0.5rem",textAlign:"center",fontFamily:"monospace"},placeholder:"â— â— â— â— â— â—",maxLength:6,onFocus:e=>e.target.style.borderColor="var(--teal)",onBlur:e=>e.target.style.borderColor="var(--border)"})]}),T&&f.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"#fff3cd",borderRadius:"8px",fontSize:"0.85rem",color:"#856404"},children:["ðŸ’¡ ",T]}),E&&f.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"#f8d7da",borderRadius:"8px",fontSize:"0.9rem",color:"#721c24"},children:["âš ï¸ ",E]}),O&&f.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"#d4edda",borderRadius:"8px",fontSize:"0.9rem",color:"#155724"},children:["âœ“ ",O]}),f.jsx("div",{style:{marginTop:"2rem"},children:z?f.jsx("button",{onClick:H,disabled:L,className:"btn-primary w-full",style:{fontSize:"1.1rem",padding:"1.25rem"},children:L?"Verifying...":"Verify & Continue â†’"}):f.jsx("button",{onClick:V,disabled:L,className:"btn-primary w-full",style:{fontSize:"1.1rem",padding:"1.25rem"},children:L?"Sending...":"Send Verification Code â†’"})}),f.jsxs("p",{style:{textAlign:"center",marginTop:"1.5rem",fontSize:"0.85rem",color:"#95a5a6"},children:["ðŸ”’ Your privacy is protected. See our ",f.jsx("a",{href:"/privacy",style:{color:"var(--teal)",textDecoration:"underline"},children:"privacy policy"})]})]})]})]})}),f.jsxs("footer",{className:"footer",children:[f.jsxs("div",{className:"footer-content",children:[f.jsxs("div",{children:[f.jsx("h3",{children:"Bake & Grill CafÃ©"}),f.jsx("p",{children:"Authentic Dhivehi cuisine, fresh pastries, and premium grills in MalÃ©."})]}),f.jsxs("div",{children:[f.jsx("h3",{children:"Location"}),f.jsx("p",{children:"Majeedhee Magu, MalÃ©, Maldives"}),f.jsx("p",{children:"Near ferry terminal"})]}),f.jsxs("div",{children:[f.jsx("h3",{children:"Quick Links"}),f.jsx("a",{href:"/menu",children:"Menu"}),f.jsx("a",{href:"/hours",children:"Opening Hours"}),f.jsx("a",{href:"/contact",children:"Contact Us"}),f.jsx("a",{href:"/privacy",children:"Privacy Policy"})]}),f.jsxs("div",{children:[f.jsx("h3",{children:"Contact"}),f.jsx("p",{children:"+960 9120011"}),f.jsx("p",{children:"hello@bakeandgrill.mv"}),f.jsx("a",{href:"https://wa.me/9609120011",target:"_blank",children:"WhatsApp"})]})]}),f.jsxs("div",{className:"footer-copyright",children:["Â© ",(new Date).getFullYear()," Bake & Grill. All rights reserved."]})]})]})}const Ue={address_line1:"",address_line2:"",island:"",contact_name:"",contact_phone:"",notes:""};function qe(e){return(e/100).toFixed(2)}function Ve(){try{const e=localStorage.getItem("bakegrill_cart");return e?JSON.parse(e):[]}catch{return[]}}function He(){return localStorage.getItem("online_token")}function Je({onSuccess:t}){const[r,n]=e.useState(""),[a,i]=e.useState(""),[o,l]=e.useState("phone"),[s,c]=e.useState(null),[d,u]=e.useState(""),[h,p]=e.useState(!1),m=async()=>{u(""),p(!0);try{const e=await Oe(r);e.otp&&c(`Dev OTP: ${e.otp}`),l("otp")}catch(ot){u(ot.message)}finally{p(!1)}},x=async()=>{u(""),p(!0);try{const e=await Ie({phone:r,otp:a});localStorage.setItem("online_token",e.token),t(e.token,e.customer.name??e.customer.phone)}catch(ot){u(ot.message)}finally{p(!1)}};return f.jsxs("div",{style:Xe.card,children:[f.jsx("h2",{style:Xe.sectionTitle,children:"Sign in to continue"}),f.jsx("p",{style:{color:"#6c757d",fontSize:14,marginBottom:16},children:"We'll send an OTP to your Maldivian number."}),d&&f.jsx("p",{style:Xe.errorText,children:d}),s&&f.jsx("p",{style:{...Xe.hintText,marginBottom:12},children:s}),"phone"===o?f.jsxs(f.Fragment,{children:[f.jsx("input",{style:Xe.input,placeholder:"Phone (e.g. 7xxxxxx)",value:r,onChange:e=>n(e.target.value),onKeyDown:e=>"Enter"===e.key&&m()}),f.jsx("button",{style:Xe.primaryBtn,onClick:m,disabled:h||!r,children:h?"Sendingâ€¦":"Send OTP"})]}):f.jsxs(f.Fragment,{children:[f.jsxs("p",{style:{fontSize:14,color:"#495057",marginBottom:8},children:["Enter the 6-digit code sent to ",r]}),f.jsx("input",{style:Xe.input,placeholder:"OTP code",value:a,onChange:e=>i(e.target.value),maxLength:6,onKeyDown:e=>"Enter"===e.key&&x()}),f.jsx("button",{style:Xe.primaryBtn,onClick:x,disabled:h||a.length<6,children:h?"Verifyingâ€¦":"Verify"}),f.jsx("button",{style:Xe.ghostBtn,onClick:()=>{l("phone"),i("")},children:"Change number"})]})]})}function Ye({cart:e}){return f.jsxs("div",{style:Xe.card,children:[f.jsx("h2",{style:Xe.sectionTitle,children:"Your Order"}),e.map(e=>f.jsxs("div",{style:Xe.cartRow,children:[f.jsxs("div",{style:{flex:1},children:[f.jsx("span",{style:{fontWeight:600},children:e.name}),e.modifiers&&e.modifiers.length>0&&f.jsxs("div",{style:{fontSize:12,color:"#6c757d"},children:["+ ",e.modifiers.map(e=>e.name).join(", ")]})]}),f.jsxs("span",{style:{color:"#6c757d",marginRight:8},children:["Ã—",e.quantity]}),f.jsxs("span",{style:{fontWeight:600,color:"#1ba3b9"},children:["MVR ",(e.price*e.quantity).toFixed(2)]})]},e.id))]})}function Ge(){const t=de(),r=e.useSyncExternalStore(e=>(window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)),()=>window.innerWidth<768,()=>!1),[n]=e.useState(Ve),[a,i]=e.useState(He),[o,l]=e.useState(null),[s,c]=e.useState(null),[d,u]=e.useState("takeaway"),[h,p]=e.useState(Ue),[m,x]=e.useState(""),[g,y]=e.useState(""),[b,v]=e.useState(null),[j,S]=e.useState(""),[w,k]=e.useState(!1),[C,_]=e.useState(null),[R,B]=e.useState(!1),[z,N]=e.useState(0),[T,P]=e.useState(0),[E,W]=e.useState({}),[O,I]=e.useState(!1),[L,M]=e.useState(""),A=e.useRef(!1);if(e.useEffect(()=>{const e=parseInt("20",10);P(100*e)},[]),e.useEffect(()=>{a&&(Ae(a).then(e=>{l(e.customer.name??e.customer.phone)}).catch(()=>{}),async function(e){return We("/loyalty/me",{headers:{Authorization:`Bearer ${e}`}})}(a).then(e=>{e.account&&e.account.points_balance>0&&(c(e.account),N(e.account.points_balance))}).catch(()=>{}))},[a]),e.useEffect(()=>{A.current&&0===n.length&&t("/"),A.current=!0},[n,t]),0===n.length)return f.jsxs("div",{style:{padding:32,textAlign:"center"},children:[f.jsx("p",{children:"Your cart is empty."}),f.jsx("button",{style:Xe.primaryBtn,onClick:()=>t("/"),children:"Back to menu"})]});const F=n.reduce((e,t)=>e+Math.round(100*t.price)*t.quantity+(t.modifiers??[]).reduce((e,r)=>e+Math.round(100*r.price)*t.quantity,0),0),D="delivery"===d?T:0,$=(null==b?void 0:b.discountLaar)??0,U=R&&s?z:0,q=Math.max(0,F+D-$-U);return f.jsxs("div",{style:Xe.page,children:[f.jsxs("header",{style:Xe.header,children:[f.jsx("button",{style:Xe.backBtn,onClick:()=>t(-1),children:"â† Back"}),f.jsx("span",{style:Xe.headerTitle,children:"Checkout"}),o&&f.jsxs("span",{style:{fontSize:13,color:"#6c757d"},children:["Hi, ",o]})]}),f.jsxs("div",{style:{...Xe.layout,gridTemplateColumns:r?"1fr":"minmax(0,1fr) 380px"},children:[f.jsxs("div",{style:{...Xe.left,order:r?1:0},children:[!a&&f.jsx(Je,{onSuccess:(e,t)=>{i(e),l(t)}}),a&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{style:Xe.card,children:[f.jsx("h2",{style:Xe.sectionTitle,children:"Order Type"}),f.jsxs("div",{style:Xe.typeRow,children:[f.jsx("button",{style:{...Xe.typeBtn,..."takeaway"===d?Xe.typeBtnActive:{}},onClick:()=>u("takeaway"),children:"ðŸ¥¡ Takeaway"}),f.jsx("button",{style:{...Xe.typeBtn,..."delivery"===d?Xe.typeBtnActive:{}},onClick:()=>u("delivery"),children:"ðŸ›µ Delivery"})]})]}),"delivery"===d&&f.jsxs("div",{style:Xe.card,children:[f.jsx("h2",{style:Xe.sectionTitle,children:"Delivery Details"}),f.jsxs("p",{style:{fontSize:13,color:"#6c757d",marginBottom:12},children:["Delivery fee: MVR ",(T/100).toFixed(2)]}),f.jsx(Qe,{label:"Address *",placeholder:"House / Flat number, Street",value:h.address_line1,onChange:e=>p({...h,address_line1:e}),error:E.address_line1}),f.jsx(Qe,{label:"Address line 2",placeholder:"Building name (optional)",value:h.address_line2,onChange:e=>p({...h,address_line2:e})}),f.jsx(Qe,{label:"Island *",placeholder:"MalÃ©",value:h.island,onChange:e=>p({...h,island:e}),error:E.island}),f.jsxs("div",{style:Xe.fieldRow,children:[f.jsx(Qe,{label:"Contact name *",placeholder:"Full name",value:h.contact_name,onChange:e=>p({...h,contact_name:e}),error:E.contact_name}),f.jsx(Qe,{label:"Contact phone *",placeholder:"7xxxxxxx",value:h.contact_phone,onChange:e=>p({...h,contact_phone:e}),error:E.contact_phone})]}),f.jsx(Qe,{label:"Delivery notes",placeholder:"Any special instructions for delivery rider",value:h.notes,onChange:e=>p({...h,notes:e}),multiline:!0})]}),f.jsxs("div",{style:Xe.card,children:[f.jsx("h2",{style:Xe.sectionTitle,children:"Order Notes"}),f.jsx("textarea",{style:{...Xe.input,height:72,resize:"vertical"},placeholder:"Any special requests or allergies?",value:m,onChange:e=>x(e.target.value)})]}),f.jsxs("div",{style:Xe.card,children:[f.jsx("h2",{style:Xe.sectionTitle,children:"Promo Code"}),b?f.jsxs("div",{style:Xe.promoApplied,children:[f.jsxs("span",{children:["âœ… ",f.jsx("strong",{children:b.code})," â€” MVR"," ",qe(b.discountLaar)," off"]}),f.jsx("button",{style:Xe.removeBtn,onClick:()=>v(null),children:"Remove"})]}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{style:{display:"flex",gap:8},children:[f.jsx("input",{style:{...Xe.input,flex:1,marginBottom:0},placeholder:"Enter promo code",value:g,onChange:e=>y(e.target.value.toUpperCase())}),f.jsx("button",{style:Xe.secondaryBtn,onClick:async()=>{if(a&&C){S(""),k(!0);try{const e=await Fe(a,C,g.trim().toUpperCase());v({code:g.trim().toUpperCase(),discountLaar:e.discount_laar}),y("")}catch(ot){S(ot.message)}finally{k(!1)}}else S("Please sign in first.")},disabled:w||!g,children:w?"â€¦":"Apply"})]}),j&&f.jsx("p",{style:{...Xe.errorText,marginTop:6},children:j})]})]}),s&&s.points_balance>0&&f.jsxs("div",{style:Xe.card,children:[f.jsx("h2",{style:Xe.sectionTitle,children:"Loyalty Points"}),f.jsxs("p",{style:{fontSize:14,color:"#495057",marginBottom:12},children:["You have"," ",f.jsxs("strong",{children:[s.points_balance," pts"]})," ","available (",f.jsxs("span",{style:{color:"#1ba3b9"},children:["MVR ",qe(s.points_balance)]})," ","value)."]}),f.jsxs("label",{style:Xe.checkboxLabel,children:[f.jsx("input",{type:"checkbox",checked:R,onChange:e=>B(e.target.checked),style:{marginRight:8,width:18,height:18}}),"Use all ",s.points_balance," pts to save MVR"," ",qe(z)]})]})]})]}),f.jsxs("div",{style:{...Xe.right,order:r?0:1},children:[f.jsx(Ye,{cart:n}),f.jsxs("div",{style:Xe.card,children:[f.jsx("h2",{style:Xe.sectionTitle,children:"Summary"}),f.jsx(Ke,{label:"Subtotal",value:`MVR ${qe(F)}`}),"delivery"===d&&f.jsx(Ke,{label:"Delivery fee",value:`MVR ${qe(D)}`}),b&&f.jsx(Ke,{label:`Promo (${b.code})`,value:`âˆ’ MVR ${qe(b.discountLaar)}`,highlight:!0}),R&&U>0&&f.jsx(Ke,{label:"Loyalty discount",value:`âˆ’ MVR ${qe(U)}`,highlight:!0}),f.jsxs("div",{style:Xe.totalRow,children:[f.jsx("span",{children:"Total"}),f.jsxs("span",{children:["MVR ",qe(q)]})]})]}),a&&f.jsxs(f.Fragment,{children:[L&&f.jsx("p",{style:{...Xe.errorText,marginBottom:12},children:L}),f.jsx("button",{style:{...Xe.primaryBtn,width:"100%",padding:"16px 24px",fontSize:17,opacity:O?.7:1},onClick:async()=>{if(a&&("delivery"!==d||(()=>{const e={};return h.address_line1.trim()||(e.address_line1="Address is required"),h.island.trim()||(e.island="Island is required"),h.contact_name.trim()||(e.contact_name="Contact name is required"),h.contact_phone.trim()||(e.contact_phone="Contact phone is required"),W(e),0===Object.keys(e).length})())){I(!0),M("");try{let e;if("delivery"===d){const t=await async function(e,t){return We("/orders/delivery",{method:"POST",headers:{Authorization:`Bearer ${e}`},body:JSON.stringify(t)})}(a,{items:n.map(e=>{var t;return{item_id:e.id,quantity:e.quantity,modifiers:null==(t=e.modifiers)?void 0:t.map(e=>({modifier_id:e.id}))}}),delivery_address_line1:h.address_line1,delivery_address_line2:h.address_line2||void 0,delivery_island:h.island,delivery_contact_name:h.contact_name,delivery_contact_phone:h.contact_phone,delivery_notes:h.notes||void 0,customer_notes:m||void 0});e=t.order.id}else{const t=await async function(e,t){return We("/customer/orders",{method:"POST",headers:{Authorization:`Bearer ${e}`},body:JSON.stringify(t)})}(a,{items:n.map(e=>{var t;return{item_id:e.id,quantity:e.quantity,modifiers:null==(t=e.modifiers)?void 0:t.map(e=>({modifier_id:e.id}))}}),type:"online_pickup",customer_notes:m||void 0});e=t.order.id}if(_(e),g.trim()&&!b)try{const t=await Fe(a,e,g.trim().toUpperCase());v({code:g.trim().toUpperCase(),discountLaar:t.discount_laar})}catch(ot){S(ot.message)}if(R&&s&&z>0)try{await async function(e,t,r){return We("/loyalty/hold",{method:"POST",headers:{Authorization:`Bearer ${e}`},body:JSON.stringify({order_id:t,points:r})})}(a,e,z)}catch(ot){console.warn("Loyalty hold failed:",ot.message)}const t=await async function(e,t){return We(`/orders/${t}/pay/bml`,{method:"POST",headers:{Authorization:`Bearer ${e}`}})}(a,e);if(!t.payment_url)throw new Error("Payment could not be started. Please try again in a moment.");localStorage.removeItem("bakegrill_cart"),window.location.href=t.payment_url}catch(ot){M(ot.message)}finally{I(!1)}}},disabled:O,children:O?"Processingâ€¦":`Pay MVR ${qe(q)} with BML`}),f.jsx("p",{style:Xe.secureNote,children:"ðŸ”’ Secure payment via BML BankConnect"})]})]})]})]})}function Qe({label:e,placeholder:t,value:r,onChange:n,error:a,multiline:i}){return f.jsxs("div",{style:{marginBottom:12},children:[f.jsx("label",{style:Xe.fieldLabel,children:e}),i?f.jsx("textarea",{style:{...Xe.input,height:64,resize:"vertical"},placeholder:t,value:r,onChange:e=>n(e.target.value)}):f.jsx("input",{style:{...Xe.input,borderColor:a?"#dc3545":"#dee2e6"},placeholder:t,value:r,onChange:e=>n(e.target.value)}),a&&f.jsx("p",{style:Xe.errorText,children:a})]})}function Ke({label:e,value:t,highlight:r}){return f.jsxs("div",{style:Xe.summaryRow,children:[f.jsx("span",{style:{color:r?"#28a745":"#495057"},children:e}),f.jsx("span",{style:{color:r?"#28a745":"#495057",fontWeight:500},children:t})]})}const Xe={page:{minHeight:"100vh",background:"#f8f9fa",fontFamily:"'Inter', sans-serif"},header:{position:"sticky",top:0,background:"#fff",borderBottom:"1px solid #e9ecef",padding:"12px 24px",display:"flex",alignItems:"center",gap:16,zIndex:100,boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},backBtn:{background:"none",border:"none",cursor:"pointer",color:"#1ba3b9",fontSize:15,fontWeight:600,padding:"4px 8px"},headerTitle:{fontWeight:700,fontSize:18,color:"#212529",flex:1},layout:{maxWidth:1100,margin:"0 auto",padding:"24px 16px",display:"grid",gap:24},left:{display:"flex",flexDirection:"column",gap:16},right:{display:"flex",flexDirection:"column",gap:16},card:{background:"#fff",borderRadius:16,padding:"20px 24px",boxShadow:"0 2px 8px rgba(0,0,0,0.04)",border:"1px solid #e9ecef"},sectionTitle:{fontSize:16,fontWeight:700,color:"#212529",margin:"0 0 16px",paddingBottom:12,borderBottom:"1px solid #f0f0f0"},input:{width:"100%",border:"1px solid #dee2e6",borderRadius:10,padding:"10px 12px",fontSize:14,color:"#212529",outline:"none",boxSizing:"border-box",marginBottom:0,fontFamily:"inherit",transition:"border-color 0.15s"},fieldLabel:{display:"block",fontSize:13,fontWeight:600,color:"#495057",marginBottom:4},fieldRow:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},typeRow:{display:"flex",gap:12},typeBtn:{flex:1,padding:"12px 16px",border:"2px solid #dee2e6",borderRadius:12,background:"#fff",cursor:"pointer",fontSize:14,fontWeight:600,color:"#495057",transition:"all 0.15s"},typeBtnActive:{borderColor:"#1ba3b9",background:"#e8f8fa",color:"#1ba3b9"},primaryBtn:{background:"linear-gradient(135deg, #1ba3b9, #0d7a8a)",color:"#fff",border:"none",borderRadius:12,padding:"12px 24px",fontSize:15,fontWeight:700,cursor:"pointer",width:"100%",transition:"opacity 0.2s"},secondaryBtn:{background:"#fff",color:"#1ba3b9",border:"2px solid #1ba3b9",borderRadius:10,padding:"10px 16px",fontSize:14,fontWeight:600,cursor:"pointer",whiteSpace:"nowrap"},ghostBtn:{background:"none",border:"none",color:"#6c757d",cursor:"pointer",fontSize:13,padding:"8px 0",textDecoration:"underline",width:"100%",marginTop:8},cartRow:{display:"flex",alignItems:"flex-start",paddingBottom:10,marginBottom:10,borderBottom:"1px solid #f0f0f0"},summaryRow:{display:"flex",justifyContent:"space-between",fontSize:14,marginBottom:8},totalRow:{display:"flex",justifyContent:"space-between",fontWeight:800,fontSize:18,color:"#212529",borderTop:"2px solid #e9ecef",paddingTop:12,marginTop:8},promoApplied:{display:"flex",alignItems:"center",justifyContent:"space-between",background:"#d4edda",borderRadius:10,padding:"10px 14px",fontSize:14},removeBtn:{background:"none",border:"none",color:"#721c24",cursor:"pointer",fontSize:13,fontWeight:600},errorText:{color:"#dc3545",fontSize:13,margin:"4px 0 0"},hintText:{background:"#fff3cd",border:"1px solid #ffc107",borderRadius:8,padding:"8px 12px",fontSize:13,color:"#856404"},checkboxLabel:{display:"flex",alignItems:"center",fontSize:14,color:"#212529",cursor:"pointer"},secureNote:{textAlign:"center",fontSize:12,color:"#6c757d",marginTop:8}};const Ze={pending:{label:"Order Received",color:"#856404",icon:"â³"},preparing:{label:"Being Prepared",color:"#0d6efd",icon:"ðŸ‘¨â€ðŸ³"},ready:{label:"Ready for Pickup / Delivery",color:"#28a745",icon:"âœ…"},out_for_delivery:{label:"Out for Delivery",color:"#1ba3b9",icon:"ðŸ›µ"},completed:{label:"Completed",color:"#6c757d",icon:"ðŸŽ‰"},cancelled:{label:"Cancelled",color:"#dc3545",icon:"âŒ"},paid:{label:"Paid â€” Preparing",color:"#28a745",icon:"âœ…"}};function et(){const{orderId:t}=function(){let{matches:t}=e.useContext(ie),r=t[t.length-1];return r?r.params:{}}(),[r]=Te(),n=de(),a=r.get("payment"),[i,o]=e.useState(null),[l,s]=e.useState(!0),[c,d]=e.useState(""),u=localStorage.getItem("online_token"),h=async()=>{if(u&&t)try{const e=await async function(e,t){return We(`/customer/orders/${t}`,{headers:{Authorization:`Bearer ${e}`}})}(u,parseInt(t,10));o(e.order)}catch(ot){d(ot.message)}finally{s(!1)}};e.useEffect(()=>{h();const e=setInterval(()=>{h()},1e4);return()=>clearInterval(e)},[t,u]);const p=i?Ze[i.status]??{label:i.status,color:"#495057",icon:"ðŸ“‹"}:null;return f.jsxs("div",{style:it.page,children:[f.jsxs("header",{style:it.header,children:[f.jsx("button",{style:it.backBtn,onClick:()=>n("/"),children:"â† Back to menu"}),f.jsx("span",{style:it.headerTitle,children:"Order Status"})]}),f.jsxs("div",{style:it.container,children:["CONFIRMED"===a&&f.jsxs("div",{style:it.successBanner,children:[f.jsx("span",{style:{fontSize:28},children:"ðŸŽ‰"}),f.jsxs("div",{children:[f.jsx("p",{style:{fontWeight:700,fontSize:18,margin:0},children:"Payment Successful!"}),f.jsx("p",{style:{margin:0,fontSize:14,opacity:.9},children:"Your order has been confirmed."})]})]}),"FAILED"===a&&f.jsxs("div",{style:it.errorBanner,children:[f.jsx("span",{style:{fontSize:28},children:"âŒ"}),f.jsxs("div",{children:[f.jsx("p",{style:{fontWeight:700,fontSize:18,margin:0},children:"Payment Failed"}),f.jsx("p",{style:{margin:0,fontSize:14,opacity:.9},children:"Please try paying again or contact us."})]})]}),l&&f.jsx("div",{style:it.card,children:f.jsx("p",{style:{color:"#6c757d",textAlign:"center"},children:"Loading orderâ€¦"})}),c&&f.jsx("div",{style:it.card,children:f.jsx("p",{style:{color:"#dc3545"},children:c})}),!l&&i&&p&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{style:it.card,children:[f.jsxs("div",{style:it.statusRow,children:[f.jsx("span",{style:{fontSize:48},children:p.icon}),f.jsxs("div",{children:[f.jsx("p",{style:{fontSize:22,fontWeight:800,color:p.color,margin:0},children:p.label}),f.jsxs("p",{style:{color:"#6c757d",fontSize:14,margin:"4px 0 0"},children:["Order #",i.order_number]})]})]}),f.jsx("div",{style:it.progressBar,children:["pending","preparing","ready","completed"].map(e=>f.jsx("div",{style:{...it.progressStep,background:rt(i.status,e)?"#1ba3b9":"#dee2e6"}},e))}),f.jsxs("div",{style:it.progressLabels,children:[f.jsx("span",{children:"Received"}),f.jsx("span",{children:"Preparing"}),f.jsx("span",{children:"Ready"}),f.jsx("span",{children:"Done"})]})]}),f.jsxs("div",{style:it.card,children:[f.jsx("h2",{style:it.sectionTitle,children:"Order Details"}),f.jsx(at,{label:"Order number",value:i.order_number}),f.jsx(at,{label:"Type",value:nt(i.type)}),f.jsx(at,{label:"Status",value:p.label}),i.paid_at&&f.jsx(at,{label:"Paid at",value:new Date(i.paid_at).toLocaleString()}),f.jsxs("div",{style:it.totalRow,children:[f.jsx("span",{children:"Total"}),f.jsxs("span",{children:["MVR"," ","number"==typeof i.total?i.total.toFixed(2):i.total]})]})]}),"delivery"===i.type&&i.delivery_address_line1&&f.jsxs("div",{style:it.card,children:[f.jsx("h2",{style:it.sectionTitle,children:"Delivery Address"}),f.jsx("p",{style:{margin:0,fontSize:14,color:"#212529"},children:i.delivery_address_line1}),i.delivery_island&&f.jsx("p",{style:{margin:"4px 0 0",fontSize:14,color:"#6c757d"},children:i.delivery_island}),i.delivery_contact_name&&f.jsxs("p",{style:{margin:"8px 0 0",fontSize:14,color:"#495057"},children:["Contact: ",i.delivery_contact_name,i.delivery_contact_phone&&` Â· ${i.delivery_contact_phone}`]})]}),i.items&&i.items.length>0&&f.jsxs("div",{style:it.card,children:[f.jsx("h2",{style:{...it.sectionTitle,marginBottom:16},children:"Items Ordered"}),i.items.map(e=>f.jsxs("div",{style:it.itemRow,children:[f.jsxs("div",{style:{flex:1},children:[f.jsx("span",{style:{fontWeight:600,fontSize:14},children:e.item_name}),e.modifiers&&e.modifiers.length>0&&f.jsxs("div",{style:{fontSize:12,color:"#6c757d",marginTop:2},children:["+ ",e.modifiers.map(e=>e.name).join(", ")]})]}),f.jsxs("span",{style:{color:"#6c757d",fontSize:14,marginRight:12},children:["Ã—",e.quantity]}),f.jsxs("span",{style:{fontWeight:600,color:"#1ba3b9",fontSize:14},children:["MVR ",e.total_price.toFixed(2)]})]},e.id))]}),f.jsx("p",{style:it.refreshNote,children:"ðŸ”„ This page refreshes automatically every 10 seconds."}),f.jsx("button",{style:it.primaryBtn,onClick:()=>n("/"),children:"Order more"})]}),!l&&!i&&!c&&f.jsxs("div",{style:it.card,children:[f.jsx("p",{style:{color:"#6c757d",textAlign:"center"},children:"Order not found. Please sign in to view your order."}),f.jsx("button",{style:{...it.primaryBtn,marginTop:12},onClick:()=>n("/"),children:"Back to menu"})]})]})]})}const tt=["pending","paid","preparing","ready","out_for_delivery","completed"];function rt(e,t){const r=tt.indexOf(e),n=tt.indexOf(t);return-1!==r&&-1!==n&&r>=n}function nt(e){return{dine_in:"Dine In",takeaway:"Takeaway",online_pickup:"Takeaway (Online)",delivery:"Delivery",preorder:"Pre-order"}[e]??e}function at({label:e,value:t}){return f.jsxs("div",{style:it.detailRow,children:[f.jsx("span",{style:{color:"#6c757d"},children:e}),f.jsx("span",{style:{fontWeight:500,color:"#212529"},children:t})]})}const it={page:{minHeight:"100vh",background:"#f8f9fa",fontFamily:"'Inter', sans-serif"},header:{position:"sticky",top:0,background:"#fff",borderBottom:"1px solid #e9ecef",padding:"12px 24px",display:"flex",alignItems:"center",gap:16,zIndex:100,boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},backBtn:{background:"none",border:"none",cursor:"pointer",color:"#1ba3b9",fontSize:15,fontWeight:600,padding:"4px 8px"},headerTitle:{fontWeight:700,fontSize:18,color:"#212529",flex:1},container:{maxWidth:640,margin:"0 auto",padding:"24px 16px",display:"flex",flexDirection:"column",gap:16},successBanner:{background:"linear-gradient(135deg, #28a745, #20c997)",color:"#fff",borderRadius:16,padding:"20px 24px",display:"flex",alignItems:"center",gap:16},errorBanner:{background:"linear-gradient(135deg, #dc3545, #e83e8c)",color:"#fff",borderRadius:16,padding:"20px 24px",display:"flex",alignItems:"center",gap:16},card:{background:"#fff",borderRadius:16,padding:"20px 24px",boxShadow:"0 2px 8px rgba(0,0,0,0.04)",border:"1px solid #e9ecef"},statusRow:{display:"flex",alignItems:"center",gap:20,marginBottom:24},progressBar:{display:"flex",gap:4,height:8,borderRadius:4,overflow:"hidden",marginBottom:6},progressStep:{flex:1,borderRadius:4,transition:"background 0.3s"},progressLabels:{display:"flex",justifyContent:"space-between",fontSize:11,color:"#6c757d"},sectionTitle:{fontSize:16,fontWeight:700,color:"#212529",paddingBottom:12,borderBottom:"1px solid #f0f0f0",marginBottom:16,margin:0},detailRow:{display:"flex",justifyContent:"space-between",fontSize:14,marginTop:10},totalRow:{display:"flex",justifyContent:"space-between",fontWeight:800,fontSize:18,color:"#212529",borderTop:"2px solid #e9ecef",paddingTop:12,marginTop:12},primaryBtn:{background:"linear-gradient(135deg, #1ba3b9, #0d7a8a)",color:"#fff",border:"none",borderRadius:12,padding:"14px 24px",fontSize:15,fontWeight:700,cursor:"pointer",width:"100%"},refreshNote:{textAlign:"center",fontSize:12,color:"#6c757d"},itemRow:{display:"flex",alignItems:"flex-start",paddingBottom:10,marginBottom:10,borderBottom:"1px solid #f0f0f0"}};x.createRoot(document.getElementById("root")).render(f.jsx(n.StrictMode,{children:f.jsx(_e,{basename:"/order",children:f.jsxs(Se,{children:[f.jsx(ve,{path:"/checkout",element:f.jsx(Ge,{})}),f.jsx(ve,{path:"/orders/:orderId",element:f.jsx(et,{})}),f.jsx(ve,{path:"*",element:f.jsx($e,{})})]})})}));
